<!DOCTYPE html>
<html lang="pt-br">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>ACall me</title>
	<link rel="stylesheet" href="css/global.css" />
	<link rel="stylesheet" href="css/header.css" />
	<link rel="stylesheet" href="css/signup.css">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" rel="stylesheet" />
	<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
	<link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.5.0/mdb.min.css" rel="stylesheet" />
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.5.0/mdb.min.js"></script>
	<script src="https://momentjs.com/downloads/moment.js"></script>
</head>

<body>
	<header class="px-md-3 px-lg-4">
		<nav class="navbar navbar-expand-md navbar-light bg-light">
			<div class="container-fluid">
				<a class="d-flex align-items-center text-black navbar-brand" href="index.html">
					ACall me
				</a>
			</div>
		</nav>
	</header>

	<main class="d-flex align-items-md-center p-3">
		<div class="container">
			<div class="row justify-content-center">
				<div class="col-xl-7 col-md-8">
					<form class="form-background shadow-1 rounded px-4 px-sm-5 pt-5 pb-3" onsubmit="handleSubmit(event)">
						<div class="mb-4 text-center">
							<h2 class="text-primary">Crie sua conta</h2>
							<p>Realize seu cadastro na <strong>ACall me</strong></p>
						</div>

						<div class="d-flex flex-column align-items-center">
							<h5>Escolha seu tipo de usuário:</h5>
							<ul class="nav nav-pills nav-justified mb-4" role="tablist">
								<li class="nav-item" role="presentation">
									<a class="nav-link active ripple" id="tab-pacient" data-mdb-toggle="pill" href="#pills-pacient" role="tab"
										aria-controls="pills-pacient" aria-selected="true" onclick="toggleUserType()">Paciente</a>
								</li>
								<li class="nav-item" role="presentation">
									<a class="nav-link ripple" id="tab-specialist" data-mdb-toggle="pill" href="#pills-specialist" role="tab"
										aria-controls="pills-register" aria-selected="false" onclick="toggleUserType()">Especialista</a>
								</li>
							</ul>
						</div>

						<div class="tab-content mb-5">
							<div class="mb-3">
								<label class="form-label mb-1" for="name">Nome completo*:</label>
								<input type="text" id="name" placeholder="Ex: Guilherme Vieira" class="form-control" required onchange="handleChange(event, 'name')" />
							</div>

							<div class="mb-3">
								<label class="form-label mb-1" for="email">E-mail*:</label>
								<input type="email" id="email" placeholder="Ex: teste@gmail.com" class="form-control" required onchange="handleChange(event, 'email')" />
							</div>

							<div class="tab-pane fade show active" id="pills-pacient" role="tabpanel" aria-labelledby="tab-pacient">
								<div class="mb-3">
									<label class="form-label mb-1" for="cpf">CPF *:</label>
									<input type="text" id="cpf" placeholder="Ex: 111.111.111-11" maxlength="14" class="form-control"
										onchange="handleChange(event, 'cpf')" />
								</div>
							</div>

							<div class="tab-pane fade" id="pills-specialist" role="tabpanel" aria-labelledby="tab-specialist">
								<div class="mb-3">
									<label class="form-label mb-1" for="documentNumber">CPF ou CNPJ*:</label>
									<input type="text" id="documentNumber" placeholder="Digite de acordo com seu tipo..." class="form-control"
										onchange="handleChange(event, 'documentNumber')" />
								</div>

								<div class="mb-3">
									<label class="form-label mb-1" for="docNumber">CRM ou CRP*:</label>
									<input type="text" id="docNumber" placeholder="Digite de acordo com seu tipo..." class="form-control" maxlength="15"
										onchange="handleChange(event, 'docNumber')" />
								</div>
							</div>

							<div class="mb-3">
								<label class="form-label mb-1" for="datebirth">Data de nascimento:</label>
								<input type="date" id="datebirth" class="form-control datepickeer" placeholder="Ex: 08/02/2002"
									onchange="handleChange(event, 'datebirth')" />
								<div class="form-text" id="datebirth-helper">
									Você precisa ter mais que 18 anos.
								</div>
							</div>

							<div class="mb-3">
								<label class="form-label mb-1" for="phone">Telefone:</label>
								<input type="tel" id="phone" class="form-control" maxlength="15" placeholder="Ex: 11 91234-5678"
									onchange="handleChange(event, 'phone')" />
							</div>

							<hr/>

							<div class="mb-3">
								<p>Gênero*:</p>
								<div class="form-check form-check-inline mx-sm-1">
									<input class="form-check-input" type="radio" required name="gender" id="masc" value="masc" />
									<label class="form-check-label radio-value" for="masc">Masculino</label>
								</div>

								<div class="form-check form-check-inline mx-sm-1">
									<input class="form-check-input" type="radio" required name="gender" id="fem" value="fem" />
									<label class="form-check-label radio-value" for="fem">Feminino</label>
								</div>

								<div class="form-check form-check-inline mx-sm-1">
									<input class="form-check-input" type="radio" required name="gender" id="notDef" value="notDef" />
									<label class="form-check-label radio-value" for="notDef">Não definido</label>
								</div>
							</div>

							<hr />

							<div>
								<div class="mb-2">
									<label class="form-label mb-1" for="password">Senha*:</label>
									<input type="password" placeholder="******" id="password" class="form-control" required onchange="handleChange(event, 'password')" />
								</div>
								<div class="mb-2">
									<label class="form-label mb-1" for="confirmPassword">Confirme a senha*:</label>
									<input type="password" placeholder="******" id="confirmPassword" class="form-control" required onchange="handleChange(event, 'confirmPassword')" />
								</div>
								<div class="form-text" id="datebirth-helper">
									Sua senha deve conter:
									<ul>
										<li>Uma letra maiúscula</li>
										<li>Uma letra minúscula</li>
										<li>Um número</li>
										<li>Um caractere especial (Ex: #, @, *, etc.)</li>
										<li>6 caracteres</li>
									</ul>
								</div>
							</div>

							<hr />

							<div class="container py-3 mb-3">
								<div class="form-check mx-sm-1">
									<input class="form-check-input me-2" type="checkbox" id="userTerms" required />
									<p>Li e concordo com os <a href="#" >termos de uso</a> e com a <a href="#">política de privacidade</a>.</p>
								</div>
								<div class="form-check mx-sm-1">
									<input class="form-check-input me-2" type="checkbox" id="authorization" required />
									<p>Autorizo o uso de eventuais dados sensíveis disponibilizados através da plataforma.</p>
								</div>
							</div>
						</div>

						<div class="mb-3">
							<button type="submit" name="signup" class="btn btn-primary col-12 disabled"
								data-mdb-ripple-color="dark">Cadastrar-se</button>
						</div>

						<div class="row mb-3 d-flex justify-content-between">
							<div class="col-5">
								<hr />
							</div>
							<div class="col-2 d-flex justify-content-center align-items-center">
								<p class="mb-0">ou</p>
							</div>
							<div class="col-5">
								<hr />
							</div>
						</div>

						<div class="d-flex justify-content-center mb-5">
							<button type="button" class="btn btn-outline-primary col-12 col-sm-auto btn-google" onclick="onSignUp()"
								data-mdb-ripple-color="dark">
								<i class="fab fa-google pe-3"></i>
								<strong>Cadastre com o Google</strong>
							</button>
						</div>
						<div class="text-center">
							<p>Já possui uma conta? <a href="signup.html" class="link">Acesse sua conta.</a></p>
						</div>
					</form>
				</div>
			</div>
		</div>
	</main>
</body>
<script type="text/javascript">
	const moment = window.moment
	const option = document.getElementById('')
	const emailElement = document.getElementById('email')
	const passwordElement = document.getElementById('password')
	const confirmPasswordElement = document.getElementById('confirmPassword')
	const signUpButtonElement = document.getElementsByName('signup')[0]
	const datebirthElement = document.getElementById('datebirth')
	const datebirthHelperText = document.getElementById('datebirth-helper')

	const formValues = {
		email: '',
		password: '',
		confirmPassword: '',
		datebirth: '',
		phone: '',
		gender: '',
		cpf: '',
		option: 'paciente'
	}

	function toggleUserType() {
		if (formValues.option === 'paciente') {
			formValues.option = 'especialista'
		} else {
			formValues.option = 'paciente'
		}
	}

	function checkPasswords() {
		const passwordRegex = new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{6,})/)

		if (!formValues.password.match(passwordRegex)) {
			passwordElement.classList.add('is-invalid')
			signUpButtonElement.classList.add('disabled')

			return
		} else {
			passwordElement.classList.remove('is-invalid')
		}

		if (formValues.password !== formValues.confirmPassword || !formValues.confirmPassword) {
			confirmPasswordElement.classList.add('is-invalid')
			signUpButtonElement.classList.add('disabled')

			return
		} else {
			confirmPasswordElement.classList.remove('is-invalid')
		}

		return signUpButtonElement.classList.remove('disabled')
	}

	function handleChange(e, field) {
		const inputValue = e.target.value

		formValues[field] = inputValue

		if (field === 'email') {
			const validEmail = formValues.email.match(/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/g)

			if (!validEmail || !formValues.email.trim()) {
				emailElement.classList.add('is-invalid')
				signUpButtonElement.classList.add('disabled')
				return
			}

			emailElement.classList.remove('is-invalid')
			signUpButtonElement.classList.remove('disabled')
			emailElement.classList.add('is-valid')
		}

		if (field === 'password') {
			checkPasswords()
		}

		if (field === 'confirmPassword') {
			checkPasswords()
		}

		if (field === 'datebirth' ) {
			const difference = moment().diff(formValues.datebirth, 'years')

			if (difference < 18) {
				datebirthElement.classList.add('is-invalid')
				datebirthHelperText.classList.add('text-danger')
				signUpButtonElement.classList.add('disabled')
				return
			}

			datebirthElement.classList.remove('is-invalid')
			datebirthHelperText.classList.remove('text-danger')
			signUpButtonElement.classList.remove('disabled')
		}

		return
	}

	function handleSubmit(e) {
		e.preventDefault()
		alert(`Cadastro do ${formValues.option} realizado com sucesso`)

		window.location = 'login.html'
	}

	function onSignUp() {
		alert('Cadastro pelo Google')
	}
</script>

</html>
